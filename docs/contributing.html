<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Guia de contribuição para o projeto Contatos">
    <title>Contribuir - Contatos</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">
                <i class="bi bi-person-vcard"></i> Contatos
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Início</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="installation.html">Instalação</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="architecture.html">Arquitetura</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="api.html">API</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="contributing.html">Contribuir</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/CristianoMZN/contatos" target="_blank">
                            <i class="bi bi-github"></i> GitHub
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <section class="bg-light py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="display-4 fw-bold mb-3">
                        <i class="bi bi-heart text-danger"></i> Contribuir
                    </h1>
                    <p class="lead text-muted">
                        Ajude a melhorar o projeto Contatos! Toda contribuição é bem-vinda.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Content -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-lg-3 mb-4">
                    <div class="sidebar-nav">
                        <nav class="nav flex-column">
                            <a class="nav-link" href="#getting-started">Começando</a>
                            <a class="nav-link" href="#code-standards">Padrões de Código</a>
                            <a class="nav-link" href="#workflow">Fluxo de Trabalho</a>
                            <a class="nav-link" href="#commits">Commits</a>
                            <a class="nav-link" href="#pull-requests">Pull Requests</a>
                            <a class="nav-link" href="#tests">Testes</a>
                            <a class="nav-link" href="#documentation">Documentação</a>
                        </nav>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="col-lg-9">
                    <!-- Getting Started -->
                    <section id="getting-started" class="mb-5">
                        <h2 class="mb-4"><i class="bi bi-rocket text-primary"></i> Como Começar</h2>

                        <div class="card mb-3">
                            <div class="card-body">
                                <h5 class="card-title">1. Fork o Repositório</h5>
                                <p>Clique no botão "Fork" no GitHub para criar sua própria cópia do repositório.</p>
                                <a href="https://github.com/CristianoMZN/contatos/fork" class="btn btn-primary" target="_blank">
                                    <i class="bi bi-git"></i> Fork no GitHub
                                </a>
                            </div>
                        </div>

                        <div class="card mb-3">
                            <div class="card-body">
                                <h5 class="card-title">2. Clone seu Fork</h5>
                                <pre class="bg-dark text-white p-3 rounded"><code>git clone https://github.com/SEU_USUARIO/contatos.git
cd contatos
git remote add upstream https://github.com/CristianoMZN/contatos.git</code></pre>
                            </div>
                        </div>

                        <div class="card mb-3">
                            <div class="card-body">
                                <h5 class="card-title">3. Configure o Ambiente</h5>
                                <pre class="bg-dark text-white p-3 rounded"><code>cp .env.example .env
docker-compose up -d
# ou
composer install
php migrate.php</code></pre>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">4. Crie um Branch</h5>
                                <pre class="bg-dark text-white p-3 rounded"><code>git checkout -b feature/minha-contribuicao</code></pre>
                            </div>
                        </div>
                    </section>

                    <!-- Code Standards -->
                    <section id="code-standards" class="mb-5">
                        <h2 class="mb-4"><i class="bi bi-code-square text-primary"></i> Padrões de Código</h2>

                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            <i class="bi bi-check-circle text-success"></i> Boas Práticas
                                        </h5>
                                        <ul>
                                            <li>Seguir PSR-12 para formatação</li>
                                            <li>Type hints em todos os métodos</li>
                                            <li>Prepared statements para SQL</li>
                                            <li>Escapar output com htmlspecialchars()</li>
                                            <li>Validar CSRF em formulários</li>
                                            <li>Documentar código complexo</li>
                                            <li>Manter métodos com &lt;50 linhas</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            <i class="bi bi-x-circle text-danger"></i> Evitar
                                        </h5>
                                        <ul>
                                            <li>SQL injection (concatenação de queries)</li>
                                            <li>XSS (output sem escape)</li>
                                            <li>Senhas em texto plano</li>
                                            <li>Hardcoded credentials</li>
                                            <li>Funções deprecated do PHP</li>
                                            <li>Comentários óbvios</li>
                                            <li>Código duplicado</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h5 class="mt-4">Exemplo de Código Correto</h5>
                        <pre class="bg-dark text-white p-3 rounded"><code class="language-php">&lt;?php
namespace App\Controllers;

use App\Core\Controller;
use App\Models\Contact;

class ContactController extends Controller
{
    /**
     * Create a new contact for the authenticated user
     * 
     * @return void
     */
    public function store(): void
    {
        // Validate CSRF token
        if (!$this->session->validateCsrfToken($_POST['_token'] ?? '')) {
            throw new \Exception('Invalid CSRF token');
        }
        
        // Validate input
        $errors = $this->validateContactData($_POST);
        if (!empty($errors)) {
            $this->session->setFlash('error', $errors);
            $this->redirect('/contacts/create');
            return;
        }
        
        // Create contact with prepared statement
        $contactModel = new Contact();
        $contact = $contactModel->create([
            'user_id' => $this->session->get('user_id'),
            'name' => $_POST['name'],
            'email' => $_POST['email'] ?? null,
            'phone' => $_POST['phone'] ?? null,
        ]);
        
        $this->session->setFlash('success', 'Contato criado com sucesso!');
        $this->redirect('/contacts/' . $contact['id']);
    }
    
    /**
     * Validate contact data
     * 
     * @param array $data Input data
     * @return array Array of validation errors
     */
    private function validateContactData(array $data): array
    {
        $errors = [];
        
        if (empty($data['name'])) {
            $errors[] = 'Nome é obrigatório';
        }
        
        if (!empty($data['email']) && !filter_var($data['email'], FILTER_VALIDATE_EMAIL)) {
            $errors[] = 'Email inválido';
        }
        
        return $errors;
    }
}</code></pre>
                    </section>

                    <!-- Workflow -->
                    <section id="workflow" class="mb-5">
                        <h2 class="mb-4"><i class="bi bi-diagram-2 text-primary"></i> Fluxo de Trabalho</h2>

                        <div class="card">
                            <div class="card-body">
                                <ol>
                                    <li class="mb-3">
                                        <strong>Sincronize com upstream:</strong>
                                        <pre class="bg-light p-2 rounded mt-2"><code>git fetch upstream
git checkout main
git merge upstream/main</code></pre>
                                    </li>
                                    
                                    <li class="mb-3">
                                        <strong>Crie um branch para sua feature:</strong>
                                        <pre class="bg-light p-2 rounded mt-2"><code>git checkout -b feature/nome-descritivo</code></pre>
                                    </li>
                                    
                                    <li class="mb-3">
                                        <strong>Faça suas alterações e commits:</strong>
                                        <pre class="bg-light p-2 rounded mt-2"><code>git add .
git commit -m "feat: adiciona funcionalidade X"</code></pre>
                                    </li>
                                    
                                    <li class="mb-3">
                                        <strong>Execute os testes:</strong>
                                        <pre class="bg-light p-2 rounded mt-2"><code>composer test
# ou
docker-compose exec app composer test</code></pre>
                                    </li>
                                    
                                    <li class="mb-3">
                                        <strong>Push para seu fork:</strong>
                                        <pre class="bg-light p-2 rounded mt-2"><code>git push origin feature/nome-descritivo</code></pre>
                                    </li>
                                    
                                    <li>
                                        <strong>Abra um Pull Request no GitHub</strong>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </section>

                    <!-- Commits -->
                    <section id="commits" class="mb-5">
                        <h2 class="mb-4"><i class="bi bi-journal-text text-primary"></i> Convenção de Commits</h2>

                        <p>Usamos <strong>Conventional Commits</strong> para mensagens de commit claras e padronizadas.</p>

                        <h5 class="mt-4">Formato</h5>
                        <pre class="bg-light p-3 rounded"><code>tipo(escopo): descrição curta

[corpo opcional]

[rodapé opcional]</code></pre>

                        <h5 class="mt-4">Tipos de Commit</h5>
                        <table class="table table-custom">
                            <thead>
                                <tr>
                                    <th>Tipo</th>
                                    <th>Descrição</th>
                                    <th>Exemplo</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>feat</code></td>
                                    <td>Nova funcionalidade</td>
                                    <td>feat(contacts): adiciona filtro por categoria</td>
                                </tr>
                                <tr>
                                    <td><code>fix</code></td>
                                    <td>Correção de bug</td>
                                    <td>fix(auth): corrige validação de email</td>
                                </tr>
                                <tr>
                                    <td><code>docs</code></td>
                                    <td>Documentação</td>
                                    <td>docs: atualiza guia de instalação</td>
                                </tr>
                                <tr>
                                    <td><code>style</code></td>
                                    <td>Formatação</td>
                                    <td>style: aplica PSR-12 em ContactController</td>
                                </tr>
                                <tr>
                                    <td><code>refactor</code></td>
                                    <td>Refatoração</td>
                                    <td>refactor: extrai validação para método privado</td>
                                </tr>
                                <tr>
                                    <td><code>test</code></td>
                                    <td>Testes</td>
                                    <td>test: adiciona testes para ContactModel</td>
                                </tr>
                                <tr>
                                    <td><code>chore</code></td>
                                    <td>Manutenção</td>
                                    <td>chore: atualiza dependências do composer</td>
                                </tr>
                            </tbody>
                        </table>

                        <h5 class="mt-4">Exemplos Completos</h5>
                        <pre class="bg-dark text-white p-3 rounded"><code># Commit simples
feat(contacts): adiciona busca por nome

# Commit com corpo
fix(auth): corrige verificação de senha

O hash da senha não estava sendo comparado corretamente
devido ao algoritmo errado sendo usado.

Closes #123

# Breaking change
feat(api)!: remove endpoint /api/v1/users

BREAKING CHANGE: O endpoint /api/v1/users foi removido.
Use /api/v2/users em seu lugar.</code></pre>
                    </section>

                    <!-- Pull Requests -->
                    <section id="pull-requests" class="mb-5">
                        <h2 class="mb-4"><i class="bi bi-git text-primary"></i> Pull Requests</h2>

                        <div class="card mb-3">
                            <div class="card-body">
                                <h5 class="card-title">Checklist do PR</h5>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="pr1">
                                    <label class="form-check-label" for="pr1">
                                        ✓ Código segue PSR-12
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="pr2">
                                    <label class="form-check-label" for="pr2">
                                        ✓ Type hints adicionados
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="pr3">
                                    <label class="form-check-label" for="pr3">
                                        ✓ Prepared statements usados
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="pr4">
                                    <label class="form-check-label" for="pr4">
                                        ✓ Output escapado corretamente
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="pr5">
                                    <label class="form-check-label" for="pr5">
                                        ✓ CSRF tokens validados
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="pr6">
                                    <label class="form-check-label" for="pr6">
                                        ✓ Testes passando
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="pr7">
                                    <label class="form-check-label" for="pr7">
                                        ✓ Documentação atualizada
                                    </label>
                                </div>
                            </div>
                        </div>

                        <h5 class="mt-4">Template de PR</h5>
                        <pre class="bg-light p-3 rounded"><code>## Descrição
Breve descrição do que foi alterado e por quê.

## Tipo de Mudança
- [ ] Bug fix (correção não-breaking)
- [ ] Nova feature (funcionalidade não-breaking)
- [ ] Breaking change (mudança que quebra compatibilidade)
- [ ] Documentação

## Como Testar
1. Acesse /rota/exemplo
2. Preencha o formulário
3. Verifique que...

## Screenshots (se aplicável)
Cole screenshots mostrando as mudanças visuais

## Checklist
- [ ] Código segue os padrões do projeto
- [ ] Testes foram adicionados/atualizados
- [ ] Documentação foi atualizada
- [ ] Commits seguem conventional commits</code></pre>
                    </section>

                    <!-- Tests -->
                    <section id="tests" class="mb-5">
                        <h2 class="mb-4"><i class="bi bi-check2-square text-primary"></i> Testes</h2>

                        <p>Mantenha ou aumente a cobertura de testes ao contribuir.</p>

                        <h5 class="mt-4">Executar Testes</h5>
                        <pre class="bg-dark text-white p-3 rounded"><code># Via Composer
composer test

# Via Docker
docker-compose exec app composer test

# Com cobertura
composer test -- --coverage-html coverage</code></pre>

                        <h5 class="mt-4">Estrutura de Testes</h5>
                        <pre class="bg-light p-3 rounded"><code>tests/
├── Unit/           # Testes unitários
│   ├── Models/
│   ├── Services/
│   └── Core/
├── Feature/        # Testes de integração
│   ├── Auth/
│   └── Contacts/
└── TestCase.php    # Classe base</code></pre>
                    </section>

                    <!-- Documentation -->
                    <section id="documentation" class="mb-5">
                        <h2 class="mb-4"><i class="bi bi-book text-primary"></i> Documentação</h2>

                        <p>Contribuições para documentação são tão importantes quanto código!</p>

                        <h5 class="mt-4">Onde Documentar</h5>
                        <ul>
                            <li><strong>README.md</strong> - Informações gerais e quick start</li>
                            <li><strong>docs/</strong> - Documentação detalhada (GitHub Pages)</li>
                            <li><strong>PHPDoc</strong> - Documentação inline do código</li>
                            <li><strong>Wiki</strong> - Tutoriais e guias avançados</li>
                        </ul>

                        <h5 class="mt-4">Como Contribuir com Docs</h5>
                        <div class="card">
                            <div class="card-body">
                                <ol>
                                    <li>Identifique área que precisa de documentação</li>
                                    <li>Escreva conteúdo claro e objetivo</li>
                                    <li>Adicione exemplos de código quando relevante</li>
                                    <li>Inclua screenshots se for UI</li>
                                    <li>Revise gramática e ortografia</li>
                                    <li>Abra PR com tag [docs]</li>
                                </ol>
                            </div>
                        </div>
                    </section>

                    <!-- Community -->
                    <section id="community" class="mb-5">
                        <h2 class="mb-4"><i class="bi bi-people text-primary"></i> Comunidade</h2>

                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            <i class="bi bi-github"></i> Issues
                                        </h5>
                                        <p>Reporte bugs, sugira features ou tire dúvidas.</p>
                                        <a href="https://github.com/CristianoMZN/contatos/issues" class="btn btn-outline-primary" target="_blank">
                                            Ver Issues
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            <i class="bi bi-chat-dots"></i> Discussões
                                        </h5>
                                        <p>Participe de discussões sobre o projeto.</p>
                                        <a href="https://github.com/CristianoMZN/contatos/discussions" class="btn btn-outline-primary" target="_blank">
                                            Discussões
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Code of Conduct -->
                    <div class="alert alert-info">
                        <h5 class="alert-heading">
                            <i class="bi bi-shield-check"></i> Código de Conduta
                        </h5>
                        <p>Seja respeitoso e construtivo em todas as interações. Valorizamos diversidade e inclusão.</p>
                        <ul class="mb-0">
                            <li>Seja gentil e paciente</li>
                            <li>Aceite críticas construtivas</li>
                            <li>Foque no que é melhor para a comunidade</li>
                            <li>Mostre empatia com outros membros</li>
                        </ul>
                    </div>

                    <!-- Thank You -->
                    <div class="text-center py-5">
                        <h2 class="mb-3">
                            <i class="bi bi-heart-fill text-danger"></i> Obrigado!
                        </h2>
                        <p class="lead mb-4">
                            Suas contribuições fazem o projeto Contatos ser melhor para todos.
                        </p>
                        <a href="https://github.com/CristianoMZN/contatos" class="btn btn-primary btn-lg">
                            <i class="bi bi-github"></i> Começar a Contribuir
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="mb-0">
                        <i class="bi bi-person-vcard"></i> 
                        <strong>Contatos</strong> - Sistema de Gerenciamento
                    </p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <a href="https://github.com/CristianoMZN/contatos" class="btn btn-outline-light btn-sm me-2">
                        <i class="bi bi-github"></i> GitHub
                    </a>
                    <a href="https://github.com/CristianoMZN/contatos/issues" class="btn btn-outline-light btn-sm">
                        <i class="bi bi-bug"></i> Issues
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
</body>
</html>
