# Application Settings
APP_ENV=production
APP_DEBUG=false
APP_URL=https://contatos.example.com
APP_PORT=8080
APP_SECRET=change_this_secret_key_in_production

# Container Registry Settings
# Format: registry.example.com or ghcr.io or docker.io
REGISTRY_URL=ghcr.io
REGISTRY_NAMESPACE=cristianomzn
IMAGE_NAME=contatos
IMAGE_TAG=latest

# Firebase / GCP Settings
FIREBASE_PROJECT_ID=contatos-app
FIREBASE_CREDENTIALS=/run/secrets/firebase-adminsdk.json   # Path to mounted service account file
FIREBASE_DATABASE_URL=https://contatos-app.firebaseio.com
FIREBASE_STORAGE_BUCKET=contatos-app.appspot.com
GCP_PROJECT_ID=contatos-app
GCP_LOCATION=southamerica-east1
GOOGLE_APPLICATION_CREDENTIALS=${FIREBASE_CREDENTIALS}    # Keep in sync with mounted secret path

# Firebase Authentication
FIREBASE_AUTH_ENABLED=true                                  # Enable Firebase Authentication
FIREBASE_API_KEY=your_web_api_key_here                     # Firebase Web API Key (for client-side SDK)
FIREBASE_AUTH_DOMAIN=contatos-app.firebaseapp.com          # Firebase Auth domain

# ASAAS Settings
ASAAS_ENV=sandbox # sandbox or production
ASAAS_API_KEY=your_asaas_api_key_here
ASAAS_WEBHOOK_SECRET=your_asaas_webhook_secret_here

# PHP-FPM Performance Tuning
# PM Mode: dynamic (recommended for production with varying load)
#          ondemand (for low-traffic or memory-constrained environments)
#          static (for consistent high traffic with dedicated resources)
PHP_FPM_PM=dynamic

# Dynamic mode settings (used when PM=dynamic)
PHP_FPM_MAX_CHILDREN=50          # Maximum number of child processes
PHP_FPM_START_SERVERS=5          # Number of processes started on boot
PHP_FPM_MIN_SPARE_SERVERS=5      # Minimum idle processes
PHP_FPM_MAX_SPARE_SERVERS=35     # Maximum idle processes
PHP_FPM_MAX_REQUESTS=1000        # Requests before process respawn

# Production tuning recommendations:
# - Low traffic (< 100 concurrent users): PM=ondemand, MAX_CHILDREN=20
# - Medium traffic (100-500 users): PM=dynamic, MAX_CHILDREN=50 (current)
# - High traffic (500+ users): PM=dynamic, MAX_CHILDREN=100-200
# 
# Memory calculation: MAX_CHILDREN * ~50MB per process
# Example: 50 children * 50MB = 2.5GB RAM needed

# Application Features
CLEAR_CACHE=false                # Clear application cache on container start

# Development Settings (used in docker-compose.override.yml)
# Uncomment for local development
# APP_ENV=development
# APP_DEBUG=true
# APP_PORT=8080
